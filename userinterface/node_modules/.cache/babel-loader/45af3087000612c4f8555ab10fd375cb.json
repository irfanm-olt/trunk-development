{"ast":null,"code":"import _defineProperty from \"/Users/optiologicdeveloper/rnProjects/userinterface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"/Users/optiologicdeveloper/rnProjects/userinterface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/optiologicdeveloper/rnProjects/userinterface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/optiologicdeveloper/rnProjects/userinterface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/optiologicdeveloper/rnProjects/userinterface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/optiologicdeveloper/rnProjects/userinterface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/Users/optiologicdeveloper/rnProjects/userinterface/src/public/enquiry/enquiryPartHeaders.js\";\nimport React, { Component } from 'react';\nimport { CButton, CCard, CCardBody, CCol, CCollapse, CFade, CRow } from '@coreui/react';\nimport CIcon from '@coreui/icons-react';\nimport { NotificationContainer, NotificationManager } from 'react-notifications';\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { loadParts, addEnquiryPartHeader } from 'src/modules/enquiry/actions';\nimport 'react-notifications/lib/notifications.css';\nimport EnquiryPartHeaders from './container/enquiryPartHeaders';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar EnquiryID = '';\nvar Manufacture = '';\n\nvar EnquiryPartHeader = /*#__PURE__*/function (_Component) {\n  _inherits(EnquiryPartHeader, _Component);\n\n  var _super = _createSuper(EnquiryPartHeader);\n\n  function EnquiryPartHeader(props) {\n    var _this;\n\n    _classCallCheck(this, EnquiryPartHeader);\n\n    _this = _super.call(this, props);\n\n    _this.handleChange = function (e) {\n      if ([\"partName\", \"quantity\"].includes(e.target.name)) {\n        var enquiryPartHeaders = _toConsumableArray(_this.state.enquiryPartHeaders);\n\n        enquiryPartHeaders[e.target.dataset.id][e.target.name] = e.target.value;\n      } else {\n        _this.setState(_defineProperty({}, e.target.name, e.target.value));\n      }\n    };\n\n    _this.handleSubmit = function (e) {\n      // submit\n      e.preventDefault();\n      var ManufactureEntry = [];\n\n      for (var i = 0; i < _this.state.enquiryPartHeaders.length; i++) {\n        if (_this.state.enquiryPartHeaders[i].partName === '' || _this.state.enquiryPartHeaders[i].quantity === '') {\n          NotificationManager.warning(\"Please Fill up Required Field.\");\n          return false;\n        }\n\n        ManufactureEntry.push(_this.state.enquiryPartHeaders[i].partName);\n      } // check duplicate entry\n\n\n      if (_this.hasDuplicates(ManufactureEntry)) {\n        NotificationManager.warning(\"Duplicate entry not permitted!\");\n        return false;\n      }\n\n      var datas = {\n        formData: _this.state,\n        enquiryID: EnquiryID\n      };\n      var parts = {};\n      parts.datas = datas;\n\n      _this.props.addEnquiryPartHeader(parts);\n    };\n\n    _this.addNewRow = function () {\n      _this.setState(function (prevState) {\n        return {\n          enquiryPartHeaders: [].concat(_toConsumableArray(prevState.enquiryPartHeaders), [{\n            index: Math.random(),\n            partName: \"\",\n            quantity: \"\"\n          }])\n        };\n      });\n    };\n\n    _this.state = {\n      collapsed: true,\n      showElements: true,\n      enquiryPartHeaders: [{\n        index: Math.random(),\n        partName: '',\n        quantity: ''\n      }]\n    };\n    return _this;\n  }\n\n  _createClass(EnquiryPartHeader, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      // enquiry part header success\n      var addHeaderSuccess = this.props.data.addHeaderSuccess;\n      var prevSuccess = prevProps.data.addHeaderSuccess;\n\n      if (addHeaderSuccess && addHeaderSuccess !== prevSuccess) {\n        this.props.history.push('/enquiry/enquiry-parts');\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      EnquiryID = localStorage.getItem('ENQUIRY-ID');\n      Manufacture = localStorage.getItem('MANUFACTURE');\n      this.props.loadParts();\n    }\n  }, {\n    key: \"hasDuplicates\",\n    value: function hasDuplicates(array) {\n      return new Set(array).size !== array.length;\n    }\n  }, {\n    key: \"clickOnDelete\",\n    value: function clickOnDelete(record) {\n      this.setState({\n        enquiryPartHeaders: this.state.enquiryPartHeaders.filter(function (r) {\n          return r !== record;\n        })\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this,\n          _jsxDEV2;\n\n      var parts = this.props.data.parts;\n      var enquiryPartHeaders = this.state.enquiryPartHeaders;\n      return /*#__PURE__*/_jsxDEV(CRow, {\n        className: \"text-center justify-content-center\",\n        children: [/*#__PURE__*/_jsxDEV(NotificationContainer, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(CCol, {\n          xs: \"12\",\n          sm: \"12\",\n          lg: \"10\",\n          children: /*#__PURE__*/_jsxDEV(CFade, {\n            in: this.state.showElements,\n            unmountOnExit: true,\n            children: /*#__PURE__*/_jsxDEV(CCard, {\n              children: /*#__PURE__*/_jsxDEV(CCollapse, {\n                show: this.state.collapsed,\n                timeout: 1000,\n                children: /*#__PURE__*/_jsxDEV(CCardBody, {\n                  children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                    children: \"Add Parts & Quantity\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 111,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n                    onSubmit: this.handleSubmit,\n                    onChange: this.handleChange,\n                    children: /*#__PURE__*/_jsxDEV(\"table\", {\n                      className: \"table\",\n                      children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                          children: [\"Add/Select part name \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 115,\n                            columnNumber: 52\n                          }, this), \" \", /*#__PURE__*/_jsxDEV(CButton, {\n                            onClick: function onClick() {\n                              return _this2.addMore();\n                            },\n                            children: \"Add new parts\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 115,\n                            columnNumber: 59\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 115,\n                          columnNumber: 27\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"Quantity\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 116,\n                          columnNumber: 27\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"Action\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 117,\n                          columnNumber: 27\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 114,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(EnquiryPartHeaders, {\n                        add: this.addNewRow,\n                        delete: this.clickOnDelete.bind(this),\n                        enquiryPartHeaders: enquiryPartHeaders,\n                        part: parts\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 119,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                        children: /*#__PURE__*/_jsxDEV(\"td\", {\n                          colSpan: \"3\",\n                          children: [/*#__PURE__*/_jsxDEV(CButton, {\n                            onClick: function onClick() {\n                              return _this2.props.history.goBack();\n                            },\n                            color: \"secondary\",\n                            className: \"mfe-3\",\n                            to: \"/enquiry\",\n                            children: [/*#__PURE__*/_jsxDEV(CIcon, {\n                              name: \"cil-x\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 122,\n                              columnNumber: 132\n                            }, this), \" Cancel\"]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 122,\n                            columnNumber: 29\n                          }, this), /*#__PURE__*/_jsxDEV(CButton, {\n                            type: \"button\",\n                            color: \"primary\",\n                            className: \"mfe-3\",\n                            children: [/*#__PURE__*/_jsxDEV(CIcon, {\n                              name: \"cil-save\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 123,\n                              columnNumber: 87\n                            }, this), \" Save\"]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 123,\n                            columnNumber: 29\n                          }, this), /*#__PURE__*/_jsxDEV(CButton, (_jsxDEV2 = {\n                            type: \"submit\",\n                            color: \"secondary\"\n                          }, _defineProperty(_jsxDEV2, \"color\", \"primary\"), _defineProperty(_jsxDEV2, \"children\", [/*#__PURE__*/_jsxDEV(CIcon, {\n                            name: \"cil-save\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 124,\n                            columnNumber: 87\n                          }, this), \" Save & Continue\"]), _jsxDEV2), void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 124,\n                            columnNumber: 29\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 121,\n                          columnNumber: 27\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 120,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 113,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 112,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 110,\n                  columnNumber: 17\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 7\n      }, this);\n    }\n  }]);\n\n  return EnquiryPartHeader;\n}(Component);\n\nEnquiryPartHeader.propTypes = {\n  enquiry: PropTypes.object.isRequired\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    data: state.enquiry\n  };\n};\n\nexport default connect(mapStateToProps, {\n  loadParts: loadParts,\n  addEnquiryPartHeader: addEnquiryPartHeader\n})(EnquiryPartHeader);","map":{"version":3,"sources":["/Users/optiologicdeveloper/rnProjects/userinterface/src/public/enquiry/enquiryPartHeaders.js"],"names":["React","Component","CButton","CCard","CCardBody","CCol","CCollapse","CFade","CRow","CIcon","NotificationContainer","NotificationManager","PropTypes","connect","loadParts","addEnquiryPartHeader","EnquiryPartHeaders","EnquiryID","Manufacture","EnquiryPartHeader","props","handleChange","e","includes","target","name","enquiryPartHeaders","state","dataset","id","value","setState","handleSubmit","preventDefault","ManufactureEntry","i","length","partName","quantity","warning","push","hasDuplicates","datas","formData","enquiryID","parts","addNewRow","prevState","index","Math","random","collapsed","showElements","prevProps","addHeaderSuccess","data","prevSuccess","history","localStorage","getItem","array","Set","size","record","filter","r","addMore","clickOnDelete","bind","goBack","propTypes","enquiry","object","isRequired","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport {\n  CButton,\n  CCard,\n  CCardBody,\n  CCol,\n  CCollapse,\n  CFade,\n  CRow\n} from '@coreui/react'\nimport CIcon from '@coreui/icons-react';\nimport { NotificationContainer, NotificationManager } from 'react-notifications';\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { loadParts, addEnquiryPartHeader } from 'src/modules/enquiry/actions';\nimport 'react-notifications/lib/notifications.css';\nimport EnquiryPartHeaders from './container/enquiryPartHeaders';\nlet EnquiryID = '';\nlet Manufacture = '';\n\nclass EnquiryPartHeader extends Component {\nconstructor(props) {\n  super(props);\n  this.state = {\n    collapsed: true,\n    showElements: true,\n    enquiryPartHeaders: [{ index: Math.random(), partName: '', quantity: '' }]\n  }\n}\n\ncomponentDidUpdate(prevProps) {\n  // enquiry part header success\n  const { addHeaderSuccess } = this.props.data;\n  const {addHeaderSuccess: prevSuccess} = prevProps.data;\n  if (addHeaderSuccess && addHeaderSuccess !== prevSuccess) {\n    this.props.history.push('/enquiry/enquiry-parts');\n  }\n}\n\ncomponentDidMount() {\n  EnquiryID = localStorage.getItem('ENQUIRY-ID');\n  Manufacture = localStorage.getItem('MANUFACTURE');\n  this.props.loadParts();\n}\n\nhandleChange = (e) => {\n  if ([\"partName\", \"quantity\"].includes(e.target.name)) {\n      let enquiryPartHeaders = [...this.state.enquiryPartHeaders]\n      enquiryPartHeaders[e.target.dataset.id][e.target.name] = e.target.value;\n  } else {\n      this.setState({ [e.target.name]: e.target.value })\n  }\n}\n\nhandleSubmit = (e) => {\n  // submit\n  e.preventDefault();\n  let ManufactureEntry = [];\n  for(var i=0;i<this.state.enquiryPartHeaders.length;i++)\n  {\n      if(this.state.enquiryPartHeaders[i].partName==='' || this.state.enquiryPartHeaders[i].quantity==='')\n      {\n          NotificationManager.warning(\"Please Fill up Required Field.\");\n          return false;\n      }\n      ManufactureEntry.push(this.state.enquiryPartHeaders[i].partName);\n  }\n\n  // check duplicate entry\n  if(this.hasDuplicates(ManufactureEntry))\n  {\n      NotificationManager.warning(\"Duplicate entry not permitted!\");\n      return false;\n  }\n  \n  const datas = { formData: this.state, enquiryID: EnquiryID }\n  const parts = {};\n  parts.datas = datas;\n  this.props.addEnquiryPartHeader(parts);\n}\n\nhasDuplicates(array) {\n  return (new Set(array)).size !== array.length;\n}\n\naddNewRow = () => {\n  this.setState((prevState) => ({\n      enquiryPartHeaders: [...prevState.enquiryPartHeaders, { index: Math.random(), partName: \"\", quantity: \"\" }],\n  }));\n}\n\n\nclickOnDelete(record) {\n  this.setState({\n      enquiryPartHeaders: this.state.enquiryPartHeaders.filter(r => r !== record)\n  });\n}\n\n\nrender() {\n  const { parts } = this.props.data;\n  let { enquiryPartHeaders } = this.state;\n  return (\n      <CRow className=\"text-center justify-content-center\">\n        <NotificationContainer/>\n        <CCol xs=\"12\" sm=\"12\" lg=\"10\">\n          <CFade in={this.state.showElements} unmountOnExit={true}>\n            <CCard>\n              <CCollapse show={this.state.collapsed} timeout={1000}>\n                <CCardBody>\n                    <h4>Add Parts &#38; Quantity</h4>\n                    <form onSubmit={this.handleSubmit} onChange={this.handleChange}>\n                      <table className=\"table\">\n                        <tr>\n                          <th>Add/Select part name <br /> <CButton onClick={() => this.addMore()}>Add new parts</CButton></th>\n                          <th>Quantity</th>\n                          <th>Action</th>\n                        </tr>\n                        <EnquiryPartHeaders add={this.addNewRow} delete={this.clickOnDelete.bind(this)} enquiryPartHeaders={enquiryPartHeaders} part={parts} />\n                        <tr>\n                          <td colSpan=\"3\">\n                            <CButton onClick={() => this.props.history.goBack()} color=\"secondary\" className=\"mfe-3\" to=\"/enquiry\"><CIcon name=\"cil-x\" /> Cancel</CButton>\n                            <CButton type=\"button\" color=\"primary\" className=\"mfe-3\" ><CIcon name=\"cil-save\" /> Save</CButton>\n                            <CButton type=\"submit\" color=\"secondary\" color=\"primary\" ><CIcon name=\"cil-save\" /> Save &#38; Continue</CButton>\n                          </td>\n                        </tr>\n                      </table>\n                    </form>\n                </CCardBody>\n              </CCollapse>\n            </CCard>\n          </CFade>\n        </CCol>\n      </CRow>\n    )\n  }\n}\n\nEnquiryPartHeader.propTypes = {\n  enquiry: PropTypes.object.isRequired,\n};\nconst mapStateToProps = state => ({\n  data: state.enquiry\n});\nexport default connect(\nmapStateToProps,\n{ loadParts, addEnquiryPartHeader }\n)(EnquiryPartHeader);\n"]},"metadata":{},"sourceType":"module"}